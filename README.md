# avito-pr-reviewer-service
–ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å, –∫–æ—Ç–æ—Ä—ã–π –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∞–µ—Ç —Ä–µ–≤—å—é–µ—Ä–æ–≤ –Ω–∞ Pull Request‚Äô—ã (PR), –∞ —Ç–∞–∫–∂–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç —É–ø—Ä–∞–≤–ª—è—Ç—å –∫–æ–º–∞–Ω–¥–∞–º–∏ –∏ —É—á–∞—Å—Ç–Ω–∏–∫–∞–º–∏.

***

> ‚ö†Ô∏è **–í–Ω–∏–º–∞–Ω–∏–µ!** –≠—Ç–æ—Ç —Å–µ—Ä–≤–∏—Å –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ!!
### —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ —Ä—É—á–∫–∏: 
* /team/add

***

## –ó–∞–ø—É—Å–∫

–î–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–∏—Å–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –∫–æ–º–∞–Ω–¥—É:

```bash
docker-compose up
```
***
## üìä –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

```mermaid
erDiagram
    teams ||--o{ users : "–∏–º–µ–µ—Ç"
    users ||--o{ pull_requests : "—Å–æ–∑–¥–∞—ë—Ç"
    users ||--o{ pull_request_reviewers : "–Ω–∞–∑–Ω–∞—á–µ–Ω"
    pull_requests ||--o{ pull_request_reviewers : "–∏–º–µ–µ—Ç"

    teams {
        bigint id PK
        varchar(255) name
    }

    users {
        varchar(255) id PK
        varchar(255) username
        bigint team_id FK
        varchar(255) is_active
    }

    pull_requests {
        varchar(255) id PK
        varchar(255) pull_request_name
        bigint author_id FK
        varchar(255) status
        timestamp created_at
        timestamp merged_at
    }

    pull_request_reviewers {
        varchar(255) pull_request_id FK
        varchar(255) reviewer_id FK
    }
```
## –î–æ–ø—É—â–µ–Ω–∏—è
* –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –∫–∞–∫–æ–π-–ª–∏–±–æ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏–º—ë–Ω –∏ ID (—Ç–æ–ª—å–∫–æ –Ω–µ –ø—É—Å—Ç—ã–µ)


* –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ User –º–æ–∂–µ—Ç –±—ã—Ç—å –∑–∞–¥–∞–Ω –ª—é–±–æ–π —Å—Ç–∞—Ç—É—Å –ø–æ–ª—è isActive (true/false)
* User –Ω–µ –º–æ–∂–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞—Ç—å –±–µ–∑ –∫–æ–º–∞–Ω–¥—ã
* User –º–æ–∂–µ—Ç –±—ã—Ç—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º —Ç–æ–ª—å–∫–æ –û–î–ù–û–ô –∫–æ–º–∞–Ω–¥—ã (–∏–∑ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã User)
* –ü—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ User –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è –µ–≥–æ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–Ω–æ—Å—Ç–∏ –∫ –æ—Ç–∫—Ä—ã—Ç—ã–º/–º–µ—Ä–¥–∂–Ω—É—Ç—ã–º —Ä–µ–≤—å—é
  * -> –ø—Ä–∏ /pullRequest/reassign –Ω–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏, —á—Ç–æ –∞–≤—Ç–æ—Ä —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ PullReq –æ—Ç–Ω–æ—Å–∏—Ç—Å—è –∫ –æ–¥–Ω–æ–π –∏ —Ç–æ–π –∂–µ –≥—Ä—É–ø–ø–µ, —á—Ç–æ –∏ –∏–∑–º–µ–Ω—è–µ–º—ã–π (old_reviewer_id), –Ω–æ–≤—ã–π –∏—â–µ—Ç—Å—è –ø–æ –≥—Ä—É–ø–ø–µ –∏–∑–º–µ–Ω—è–µ–º–æ–≥–æ


* Team –º–æ–∂–µ—Ç –±—ã—Ç—å –ë–ï–ó —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
  * -> –æ—Ç–¥–µ–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Team
  * -> /team/get –º–æ–∂–µ—Ç –≤—ã–¥–∞—Ç—å CODE 200 –∏ –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤
* –í –∫–æ–º–∞–Ω–¥–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –õ–Æ–ë–û–ï –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
* –ï—Å–ª–∏ –≤ /team/add –±—É–¥–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ userId –≤—Å—Ç–∞–≤–∏—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω–µ–µ –≤—Ö–æ–∂–¥–µ–Ω–∏–µ —é–∑–µ—Ä–∞ 


* –ï—Å–ª–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ PR –≤ —Ç–∞–±–ª–∏—Ü–µ pull_request_reviewers —É–∂–µ –æ–∫–∞–∑–∞–ª–∞—Å—å –ø–∞—Ä–∞ reviewer_id-pull_request_id, —Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞–ª—å–Ω—ã—Ö (–Ω–µ –æ—à–∏–±–∫–∞)
* –ó–∞–ø—Ä–æ—Å—ã –Ω–∞ –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–∑ –ë–î –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤–∞–ª–∏–¥–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ç—Ä–æ–Ω–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –¥–æ–º–µ–Ω–Ω—ã–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã
* –ï—Å–ª–∏ –ø—Ä–∏ /users/getReview user_id –Ω–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –Ω–∏ –≤ –æ–¥–Ω–æ–º PR -> –≤—ã–¥–∞—Å—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ (–±–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è user_id –≤ —Ç–∞–±–ª–∏—Ü–µ Users) 
* –ï—Å–ª–∏ –ø—Ä–∏ /users/getReview –≤ —Ç–∞–±–ª–∏—Ü–µ pull_requests –Ω–µ –æ–∫–∞–∑–∞–ª–æ—Å—å PR c pull_request_id –∫–æ—Ç–æ—Ä–æ–µ –µ—Å—Ç—å pull_request_reviewers, —Ç–æ –Ω–µ –±—É–¥–µ–º –≤—ã–≤–æ–¥–∏—Ç—å —Ç–∞–∫–æ–π pullRequest

* –ò–∑–º–µ–Ω—ë–Ω –ø–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –≤ dto –¥–ª—è 100% —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ñ–æ—Ä–º–∞—Ç–æ–≤ –æ—Ç–≤–µ—Ç–æ–≤